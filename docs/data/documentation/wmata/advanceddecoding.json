{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you are persisting responses from the WMATA API in your application, you may need to decode those responses later outside of the usual structures provided in this package. This is possible by using the same decoding methods using within this package."}]},{"anchor":"The-WMATADecoding-Protocol","level":2,"type":"heading","text":"The WMATADecoding Protocol"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Internally this package uses the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/WMATADecoding"},{"type":"text","text":" protocol to decode responses from both the Standard and GTFS APIs. This protocol is also available to you. Simply adopt the protocol on your own object and call the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/WMATADecoding\/decode(standard:)-3so7u"},{"type":"text","text":" or   "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/WMATADecoding\/decode(gtfs:)-66ov5"},{"type":"text","text":" functions on your object. These methods return a "},{"type":"codeVoice","code":"Result"},{"type":"text","text":" with your "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Endpoint\/Response"},{"type":"text","text":" or a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/WMATAError"},{"type":"text","text":"."}]},{"anchor":"Example","level":3,"type":"heading","text":"Example"},{"type":"codeListing","syntax":"swift","code":["struct CustomDecoder: WMATADecoding {","    ...","}","","let decoder = CustomerDecoder()","let data: Data = YOUR_SAVED_RESPONSE_DATA","","let result: Result<Rail.StationEntrances.Response, WMATAError> = decoder.decode(standard: data)","","switch result {","    case let .success(response):","        print(response)","    case let .failure(error):","        print(error)","}"]},{"anchor":"Standard-API-Decoder","level":2,"type":"heading","text":"Standard API Decoder"},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/WMATADecoding"},{"type":"text","text":" uses "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/WMATAJSONDecoder"},{"type":"text","text":" when decoding Standard API responses. You can create your own instances of this custom decoder. This decoder makes use of "},{"type":"codeVoice","code":"convertFromWMATA"},{"type":"text","text":" decoding strategy defined on "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/jsondecoder\/keydecodingstrategy"},{"type":"text","text":", which is also available to you. This decoder also uses the "},{"type":"codeVoice","code":"wmataFormat"},{"type":"text","text":" date format defined on "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/dateformatter"},{"type":"text","text":", also available to you. These custom decoding strategies are required in order to properly decode data from the WMATA API, which is often structured strangely or in a non-standard way."}]},{"anchor":"Example","level":3,"type":"heading","text":"Example"},{"type":"codeListing","syntax":"swift","code":["let decoder = WMATAJSONDecoder()","let data: Data = YOUR_STANDARD_API_RESPONSE_DATA","","let result = try WMATAJSONDecoder().decode(Bus.StopsSearch.Response.Self, from: data)","","switch result {","    case let .success(response):","        print(response)","    case let .failure(error):","        print(error)","}"]},{"anchor":"GTFS-API-Decoding","level":2,"type":"heading","text":"GTFS API Decoding"},{"type":"paragraph","inlineContent":[{"type":"text","text":"GTFS API responses are protocol buffer messages. In order to decode yourself simply"}]},{"type":"codeListing","syntax":"swift","code":["let data: Data = YOUR_GTFS_API_RESPONSE_DATA","","let message = try TransitRealtime_FeedMessage(serializedData: data)"]},{"anchor":"Custom-Decoding","level":2,"type":"heading","text":"Custom Decoding"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you’d like to define your own structurs to decode into, this package provides the propery wrapper "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/MapToNil"},{"type":"text","text":" that allows you to make "},{"type":"codeVoice","code":"Codable"},{"type":"text","text":" values in responses to "},{"type":"codeVoice","code":"nil"},{"type":"text","text":" as a helper. It is not required for custom decoding."}]},{"type":"codeListing","syntax":"swift","code":["struct CustomResponse: Codable {","    ...","    @MapToNil<Station, EmptyString> var station: Station?","    ...","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can create custom values to map to nil in your response structure by adopting "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/WMATAMappedValues"},{"type":"text","text":"."}]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/wmata\/advanceddecoding"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/WMATA\/documentation\/WMATA\/AdvancedDecoding","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Decode responses from the WMATA API yourself"}],"kind":"article","metadata":{"modules":[{"name":"WMATA"}],"role":"collectionGroup","title":"Decoding Yourself"},"hierarchy":{"paths":[["doc:\/\/WMATA\/documentation\/WMATA"]]},"topicSections":[{"title":"Decoding Responses","identifiers":["doc:\/\/WMATA\/documentation\/WMATA\/WMATADecoding","doc:\/\/WMATA\/documentation\/WMATA\/WMATAJSONDecoder"]},{"title":"Custom Decoding","identifiers":["doc:\/\/WMATA\/documentation\/WMATA\/MapToNil","doc:\/\/WMATA\/documentation\/WMATA\/WMATAMappedValues"]},{"title":"Custom Values","identifiers":["doc:\/\/WMATA\/documentation\/WMATA\/DashesAndNo","doc:\/\/WMATA\/documentation\/WMATA\/EmptyString","doc:\/\/WMATA\/documentation\/WMATA\/SingleDash","doc:\/\/WMATA\/documentation\/WMATA\/SingleZero","doc:\/\/WMATA\/documentation\/WMATA\/SingleIntZero"]}],"references":{"https://developer.apple.com/documentation/foundation/dateformatter":{"title":"DateFormatter","titleInlineContent":[{"type":"codeVoice","code":"DateFormatter"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/dateformatter","url":"https:\/\/developer.apple.com\/documentation\/foundation\/dateformatter"},"doc://WMATA/documentation/WMATA/WMATADecoding/decode(gtfs:)-66ov5":{"defaultImplementations":1,"role":"symbol","title":"decode(gtfs:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"decode"},{"kind":"text","text":"("},{"kind":"externalParam","text":"gtfs"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Data","preciseIdentifier":"s:10Foundation4DataV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Result","preciseIdentifier":"s:s6ResultO"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"TransitRealtime_FeedMessage","preciseIdentifier":"s:5WMATA27TransitRealtime_FeedMessageV"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"WMATAError","preciseIdentifier":"s:5WMATA10WMATAErrorO"},{"kind":"text","text":">"}],"abstract":[{"type":"text","text":"Decode response from the GTFS API."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/WMATADecoding\/decode(gtfs:)-66ov5","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/wmata\/wmatadecoding\/decode(gtfs:)-66ov5"},"doc://WMATA/documentation/WMATA/EmptyString":{"role":"symbol","title":"EmptyString","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"EmptyString"}],"abstract":[{"type":"text","text":"Map an empty string to "},{"type":"codeVoice","code":"nil"},{"type":"text","text":"."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/EmptyString","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"EmptyString"}],"url":"\/documentation\/wmata\/emptystring"},"doc://WMATA/documentation/WMATA/WMATAJSONDecoder":{"role":"symbol","title":"WMATAJSONDecoder","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"WMATAJSONDecoder"}],"abstract":[{"type":"text","text":"A custom JSON decoder for Standard API responses."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/WMATAJSONDecoder","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"WMATAJSONDecoder"}],"url":"\/documentation\/wmata\/wmatajsondecoder"},"doc://WMATA/documentation/WMATA/WMATAError":{"role":"symbol","title":"WMATAError","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"WMATAError"}],"abstract":[{"type":"text","text":"All errors that occur with the WMATA package."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/WMATAError","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"WMATAError"}],"url":"\/documentation\/wmata\/wmataerror"},"doc://WMATA/documentation/WMATA/WMATADecoding/decode(standard:)-3so7u":{"role":"symbol","title":"decode(standard:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"decode"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"Response"},{"kind":"text","text":">("},{"kind":"externalParam","text":"standard"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Data","preciseIdentifier":"s:10Foundation4DataV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Result","preciseIdentifier":"s:s6ResultO"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Response"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"WMATAError","preciseIdentifier":"s:5WMATA10WMATAErrorO"},{"kind":"text","text":">"}],"abstract":[],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/WMATADecoding\/decode(standard:)-3so7u","kind":"symbol","type":"topic","url":"\/documentation\/wmata\/wmatadecoding\/decode(standard:)-3so7u"},"doc://WMATA/documentation/WMATA/WMATAMappedValues":{"role":"symbol","title":"WMATAMappedValues","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"WMATAMappedValues"}],"abstract":[{"type":"text","text":"Values to map to "},{"type":"codeVoice","code":"nil"},{"type":"text","text":" when using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/MapToNil"},{"type":"text","text":"."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/WMATAMappedValues","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"WMATAMappedValues"}],"url":"\/documentation\/wmata\/wmatamappedvalues"},"doc://WMATA/documentation/WMATA/SingleDash":{"role":"symbol","title":"SingleDash","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"SingleDash"}],"abstract":[{"type":"text","text":"Map the value "},{"type":"codeVoice","code":"\"-\""},{"type":"text","text":" to "},{"type":"codeVoice","code":"nil"},{"type":"text","text":"."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/SingleDash","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SingleDash"}],"url":"\/documentation\/wmata\/singledash"},"https://developer.apple.com/documentation/foundation/jsondecoder/keydecodingstrategy":{"title":"JSONDecoder.KeyDecodingStrategy","titleInlineContent":[{"type":"codeVoice","code":"JSONDecoder.KeyDecodingStrategy"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/jsondecoder\/keydecodingstrategy","url":"https:\/\/developer.apple.com\/documentation\/foundation\/jsondecoder\/keydecodingstrategy"},"doc://WMATA/documentation/WMATA/WMATADecoding":{"role":"symbol","title":"WMATADecoding","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"WMATADecoding"}],"abstract":[{"type":"text","text":"Protocol for decoding responses from WMATA’s API"}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/WMATADecoding","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"WMATADecoding"}],"url":"\/documentation\/wmata\/wmatadecoding"},"doc://WMATA/documentation/WMATA/MapToNil":{"role":"symbol","title":"MapToNil","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"MapToNil"}],"abstract":[{"type":"text","text":"A propery wrapper for mapping certain values in Standard API responses to "},{"type":"codeVoice","code":"nil"},{"type":"text","text":"."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/MapToNil","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MapToNil"}],"url":"\/documentation\/wmata\/maptonil"},"doc://WMATA/documentation/WMATA":{"role":"collection","title":"WMATA","abstract":[{"type":"text","text":"WMATA is an interface to the Washington Metropolitan Area Transit Authority API."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA","kind":"symbol","type":"topic","url":"\/documentation\/wmata"},"doc://WMATA/documentation/WMATA/SingleZero":{"role":"symbol","title":"SingleZero","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"SingleZero"}],"abstract":[{"type":"text","text":"Map the value "},{"type":"codeVoice","code":"\"0\""},{"type":"text","text":" to "},{"type":"codeVoice","code":"nil"},{"type":"text","text":"."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/SingleZero","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SingleZero"}],"url":"\/documentation\/wmata\/singlezero"},"doc://WMATA/documentation/WMATA/SingleIntZero":{"role":"symbol","title":"SingleIntZero","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"SingleIntZero"}],"abstract":[{"type":"text","text":"Map the value "},{"type":"codeVoice","code":"0"},{"type":"text","text":" to "},{"type":"codeVoice","code":"nil"},{"type":"text","text":"."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/SingleIntZero","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SingleIntZero"}],"url":"\/documentation\/wmata\/singleintzero"},"doc://WMATA/documentation/WMATA/Endpoint/Response":{"role":"symbol","title":"Response","fragments":[{"kind":"keyword","text":"associatedtype"},{"kind":"text","text":" "},{"kind":"identifier","text":"Response"}],"abstract":[{"type":"text","text":"The response WMATA sends back when calling this endpoint"}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Endpoint\/Response","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/wmata\/endpoint\/response"},"doc://WMATA/documentation/WMATA/DashesAndNo":{"role":"symbol","title":"DashesAndNo","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"DashesAndNo"}],"abstract":[{"type":"text","text":"Map the values "},{"type":"codeVoice","code":"\"--\""},{"type":"text","text":" and "},{"type":"codeVoice","code":"\"No\""},{"type":"text","text":" to "},{"type":"codeVoice","code":"nil"},{"type":"text","text":"."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/DashesAndNo","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DashesAndNo"}],"url":"\/documentation\/wmata\/dashesandno"}}}